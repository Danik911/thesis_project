# Open-Source LLM Testing Environment Configuration
# This file configures the environment for testing OSS models
# Copy this file to .env to activate OSS model testing

# ============================================================================
# PRIMARY CONFIGURATION - OSS MODEL PROVIDER
# ============================================================================

# Provider selection (openrouter|cerebras|together|fireworks|openai)
# OpenRouter recommended for production (cheapest with redundancy)
LLM_PROVIDER=openrouter

# Model selection (provider-specific)
# For OpenRouter: openai/gpt-oss-120b or openai/gpt-oss-20b
# For Cerebras: gpt-oss-120b
# For Together: meta-llama/Llama-3.3-70B-Instruct-Turbo
# For Fireworks: accounts/fireworks/models/llama-v3p3-70b-instruct
LLM_MODEL_OSS=openai/gpt-oss-120b

# Model parameters
LLM_TEMPERATURE=0.1
LLM_MAX_TOKENS=4000
LLM_TIMEOUT=600

# Test mode (isolation|integration|comparison|performance)
LLM_TEST_MODE=isolation

# ============================================================================
# API KEYS - REQUIRED FOR EACH PROVIDER
# ============================================================================

# OpenRouter (https://openrouter.ai/keys)
OPENROUTER_API_KEY=your_openrouter_api_key_here

# Cerebras (https://cloud.cerebras.ai/platform)
CEREBRAS_API_KEY=your_cerebras_api_key_here

# Together AI (https://api.together.xyz/)
TOGETHER_API_KEY=your_together_api_key_here

# Fireworks (https://app.fireworks.ai/)
FIREWORKS_API_KEY=your_fireworks_api_key_here

# OpenAI - Keep for comparison testing
# This is your existing key, keep it for baseline comparison
OPENAI_API_KEY=your_existing_openai_key_here

# ============================================================================
# TESTING CONFIGURATION
# ============================================================================

# Enable parallel testing (run OSS and OpenAI side-by-side)
ENABLE_PARALLEL_TESTING=true

# Enable performance monitoring
ENABLE_PERFORMANCE_MONITORING=true

# Enable cost tracking
ENABLE_COST_TRACKING=true

# Compliance validation level (basic|standard|strict)
COMPLIANCE_VALIDATION_LEVEL=strict

# ============================================================================
# AGENT-SPECIFIC OVERRIDES (Optional)
# ============================================================================

# Override specific agents to use different models/providers
# Leave empty to use global settings

# Categorization Agent
CATEGORIZATION_PROVIDER=
CATEGORIZATION_MODEL=

# OQ Generator Agent
OQ_GENERATOR_PROVIDER=
OQ_GENERATOR_MODEL=

# Research Agent
RESEARCH_PROVIDER=
RESEARCH_MODEL=

# SME Agent
SME_PROVIDER=
SME_MODEL=

# Context Provider Agent
CONTEXT_PROVIDER_PROVIDER=
CONTEXT_PROVIDER_MODEL=

# ============================================================================
# FALLBACK CONFIGURATION - CRITICAL: MUST BE DISABLED
# ============================================================================

# NO FALLBACKS ALLOWED - System must fail explicitly
LLM_FALLBACK_ENABLED=false
LLM_AUTO_RETRY=false
LLM_MASK_ERRORS=false

# ============================================================================
# MONITORING AND OBSERVABILITY
# ============================================================================

# Phoenix Configuration (existing)
PHOENIX_ENABLE_TRACING=true
PHOENIX_HOST=localhost
PHOENIX_PORT=6006
PHOENIX_PROJECT_NAME=oss_model_testing
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:6006/v1/traces

# Additional OSS Testing Metrics
ENABLE_TOKEN_COUNTING=true
ENABLE_LATENCY_TRACKING=true
ENABLE_ERROR_REPORTING=true

# ============================================================================
# REGULATORY COMPLIANCE
# ============================================================================

# GAMP-5 Configuration
GAMP5_VALIDATION_MODE=true
GAMP5_MIN_CONFIDENCE=0.95
GAMP5_REQUIRE_AUDIT_TRAIL=true

# ALCOA+ Compliance
ALCOA_ATTRIBUTABLE=true
ALCOA_LEGIBLE=true
ALCOA_CONTEMPORANEOUS=true
ALCOA_ORIGINAL=true
ALCOA_ACCURATE=true

# 21 CFR Part 11
CFR_PART_11_COMPLIANT=true
CFR_ELECTRONIC_SIGNATURES=true
CFR_AUDIT_TRAIL=true

# ============================================================================
# TESTING THRESHOLDS
# ============================================================================

# Performance thresholds
MAX_LATENCY_P95_MS=5000
MAX_LATENCY_P99_MS=10000
MIN_THROUGHPUT_TPS=50

# Accuracy thresholds
MIN_CATEGORIZATION_ACCURACY=0.95
MIN_OQ_QUALITY_SCORE=0.85
MIN_AGENT_SUCCESS_RATE=0.98

# Cost thresholds
MAX_COST_PER_OPERATION=0.10
MAX_DAILY_COST=100.00

# ============================================================================
# DEBUG AND LOGGING
# ============================================================================

# Logging configuration
LOG_LEVEL=INFO
LOG_TO_FILE=true
LOG_FILE_PATH=logs/oss_testing.log
LOG_INCLUDE_TIMESTAMPS=true
LOG_INCLUDE_METRICS=true

# Debug options
DEBUG_MODE=false
DEBUG_PRINT_PROMPTS=false
DEBUG_PRINT_RESPONSES=false
DEBUG_SAVE_TRACES=true

# ============================================================================
# MIGRATION SETTINGS
# ============================================================================

# Migration phase (phase_1|phase_2|phase_3|production)
MIGRATION_PHASE=phase_1

# Risk tolerance (low|medium|high)
RISK_TOLERANCE=low

# Rollback trigger (automatic|manual)
ROLLBACK_TRIGGER=automatic
ROLLBACK_ERROR_THRESHOLD=0.05

# ============================================================================
# NOTES FOR TESTING
# ============================================================================

# 1. Start with isolation testing (LLM_TEST_MODE=isolation)
# 2. Test each agent individually before integration
# 3. Monitor costs closely during initial testing
# 4. Keep OPENAI_API_KEY for comparison testing
# 5. NEVER enable fallbacks - all failures must be explicit
# 6. Document all test results for regulatory compliance
# 7. Validate GAMP-5 compliance at each phase

# To activate this configuration:
# Windows: copy .env.oss_testing .env
# Linux/Mac: cp .env.oss_testing .env

# Then restart your application or reload environment variables
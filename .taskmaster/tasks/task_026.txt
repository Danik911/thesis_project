# Task ID: 26
# Title: Prepare Cross-Validation Dataset
# Status: done
# Dependencies: 21
# Priority: high
# Description: All 17 URS documents containing real pharmaceutical requirements have been prepared and validated for k=5 fold cross-validation with stratified splitting by GAMP category and complexity. Dataset integrity, statistical validation, and workflow integration are complete and verified.
# Details:
Dataset integrity and cross-validation setup:
- 17 genuine URS documents (5 Cat3, 5 Cat4, 5 Cat5, 2 Ambiguous), all verified to exist and contain real pharmaceutical requirements
- 442 total requirements across all documents, with sampled breakdowns for each category
- Complexity scores in the 0.180-0.431 range
- 5-fold stratified splitting implemented, stratified by GAMP category and complexity score
- Statistical validation (chi-square, KS tests) confirms acceptable category and complexity balance; expected minor imbalance for Ambiguous due to small sample size
- All operations use fixed random seed (42) for reproducibility
- All files and code modules created: dataset_inventory.json, cv_config.json, cv_manager.py, validate_folds.py, cv_workflow_integration.py
- Integration with main workflow (main/src/core/unified_workflow.py) and Phoenix AI observability ready
- Audit trail and explicit error handling (no fallbacks) implemented for GAMP-5 compliance
- All fold assignments and validation results are available for thesis documentation and appendix

# Test Strategy:
1. Confirm all 17 URS documents exist at specified paths and contain real, non-mock pharmaceutical requirements
2. Verify category distribution: 5 Cat3, 5 Cat4, 5 Cat5, 2 Ambiguous
3. Validate total requirements count (442) and sampled breakdowns for each category
4. Run cross-validation split with k=5, stratified by GAMP category and complexity, using seed=42
5. Run statistical validation suite (chi-square for category, KS for complexity) and confirm results match expected (pass for category/complexity, partial fail for Ambiguous balance)
6. Confirm all folds use each document exactly once as test set
7. Review audit logs for GAMP-5 compliance and explicit error handling
8. Confirm integration with main workflow and Phoenix AI observability
9. Ensure all outputs (fold assignments, validation results) are available for thesis documentation

# Subtasks:
## 2601. Verify existence and authenticity of all 17 URS documents [done]
### Dependencies: None
### Description: Check that all 17 URS documents exist at the correct paths and contain real pharmaceutical requirements (no mock data).
### Details:


## 2602. Catalog dataset metadata and verification status [done]
### Dependencies: None
### Description: Create dataset_inventory.json with complete metadata and verification status for each URS document.
### Details:


## 2603. Configure and implement stratified k-fold splitting [done]
### Dependencies: None
### Description: Implement k=5 stratified splitting by GAMP category and complexity score, using a fixed random seed (42) for reproducibility. Store configuration in cv_config.json.
### Details:


## 2604. Develop CrossValidationManager class [done]
### Dependencies: None
### Description: Create cv_manager.py with CrossValidationManager class for managing fold assignments. Ensure no fallback logic; all errors must be explicit.
### Details:


## 2605. Statistical validation of folds [done]
### Dependencies: None
### Description: Implement validate_folds.py to run chi-square and KS tests on fold assignments. Confirm category and complexity balance; document expected partial failures for Ambiguous category.
### Details:


## 2606. Integrate cross-validation workflow [done]
### Dependencies: None
### Description: Integrate cross-validation process with main workflow (main/src/core/unified_workflow.py) and ensure compatibility with Phoenix AI observability.
### Details:


## 2607. Audit trail and compliance verification [done]
### Dependencies: None
### Description: Ensure all operations are logged for GAMP-5 compliance and that all failures are explicit with diagnostics (no fallback logic).
### Details:


## 2608. Prepare outputs for thesis documentation [done]
### Dependencies: None
### Description: Ensure all fold assignments, validation results, and audit logs are available and formatted for inclusion in the thesis appendix.
### Details:


